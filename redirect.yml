traefik.enable=true

traefik.http.middlewares.gzip.compress=true
traefik.http.middlewares.redirect-to-https.redirectscheme.scheme=https
traefik.http.middlewares.redirect-domain.redirectregex.regex=(.)*
traefik.http.middlewares.redirect-domain.redirectregex.replacement=https://keycapthenotes.com$1
traefik.http.middlewares.redirect-domain.redirectregex.permanent=true

traefik.http.routers.http-0-tc8scws.entryPoints=http
traefik.http.routers.http-0-tc8scws.middlewares=redirect-domain
traefik.http.routers.http-0-tc8scws.rule=Host(`keycap.bogdankostyuk.xyz`) && PathPrefix(`/`)
traefik.http.routers.http-0-tc8scws.service=http-0-tc8scws

traefik.http.routers.http-1-tc8scws.entryPoints=http
traefik.http.routers.http-1-tc8scws.middlewares=redirect-to-https
traefik.http.routers.http-1-tc8scws.rule=Host(`keycapthenotes.com`) && PathPrefix(`/`)
traefik.http.routers.http-1-tc8scws.service=http-1-tc8scws

traefik.http.routers.https-0-tc8scws.entryPoints=https
traefik.http.routers.https-0-tc8scws.middlewares=redirect-domain
traefik.http.routers.https-0-tc8scws.rule=Host(`keycap.bogdankostyuk.xyz`) && PathPrefix(`/`)
traefik.http.routers.https-0-tc8scws.service=https-0-tc8scws
traefik.http.routers.https-0-tc8scws.tls.certresolver=letsencrypt
traefik.http.routers.https-0-tc8scws.tls=true

traefik.http.routers.https-1-tc8scws.entryPoints=https
traefik.http.routers.https-1-tc8scws.middlewares=gzip
traefik.http.routers.https-1-tc8scws.rule=Host(`keycapthenotes.com`) && PathPrefix(`/`)
traefik.http.routers.https-1-tc8scws.service=https-1-tc8scws
traefik.http.routers.https-1-tc8scws.tls.certresolver=letsencrypt
traefik.http.routers.https-1-tc8scws.tls=true

traefik.http.services.http-0-tc8scws.loadbalancer.server.port=3000
traefik.http.services.http-1-tc8scws.loadbalancer.server.port=3000

traefik.http.services.https-0-tc8scws.loadbalancer.server.port=3000
traefik.http.services.https-1-tc8scws.loadbalancer.server.port=3000

caddy_0.encode=zstd gzip
caddy_0.handle_path.0_reverse_proxy={{upstreams 3000}}
caddy_0.handle_path=/*
caddy_0.header=-Server
caddy_0.try_files={path} /index.html /index.php
caddy_0=https://keycap.bogdankostyuk.xyz

caddy_1.encode=zstd gzip
caddy_1.handle_path.1_reverse_proxy={{upstreams 3000}}
caddy_1.handle_path=/*
caddy_1.header=-Server
caddy_1.try_files={path} /index.html /index.php
caddy_1=https://keycapthenotes.com
caddy_ingress_network=coolify
